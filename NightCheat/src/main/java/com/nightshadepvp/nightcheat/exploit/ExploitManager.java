package com.nightshadepvp.nightcheat.exploit;

import com.google.common.collect.Sets;
import com.nightshadepvp.core.Core;
import com.nightshadepvp.core.Logger;
import com.nightshadepvp.nightcheat.NightCheat;
import java.util.HashSet;

public class ExploitManager {

    private NightCheat plugin;
    private HashSet<Exploit> exploits;

    public ExploitManager(NightCheat plugin) {
        this.plugin = plugin;
        exploits = Sets.newHashSet();

        registerExploit(new CustomPayloadExploit(plugin));
    }

    private void registerExploit(Exploit exploit){
        this.exploits.add(exploit);
        plugin.getServer().getPluginManager().registerEvents(exploit, plugin);
        exploit.setExploitManager(this);
        exploit.setProtocolManager(plugin.getProtocolManager());
        exploit.setViolationManager(plugin.getViolationManager());
        exploit.setEnabled(true);
        Core.get().getLogManager().log(Logger.LogType.INFO, "[NightCheat] Registered " + exploit.getName() + ".");
    }
}
